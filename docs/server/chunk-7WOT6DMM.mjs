import './polyfills.server.mjs';
import{a as P,b as F}from"./chunk-NTZ363UZ.mjs";import"./chunk-GTSSCL6B.mjs";import"./chunk-WVUI6REW.mjs";import{I as D,l as T}from"./chunk-LOHHBPFK.mjs";import{Hb as s,Ib as v,Jb as x,Ma as h,Ob as w,Qa as l,Qb as y,Ub as I,Wb as E,Y as C,aa as g,hb as f,ka as p,la as u,nb as S,ob as b,pb as r,qb as n,rb as m,ub as k,yb as d,zb as _}from"./chunk-SFVOZAT5.mjs";import"./chunk-VVCT4QZE.mjs";var V=(o,a)=>a.product.id,$=o=>["/orders",o];function j(o,a){if(o&1){let c=k();r(0,"div",5)(1,"div",8)(2,"div"),m(3,"img",9),n()(),r(4,"div",10)(5,"div")(6,"h3",11),s(7),n(),r(8,"p",12),s(9),n(),r(10,"span",13),d("click",function(){let e=p(c).$implicit,i=_();return u(i.removeItem(e.product.id))}),m(11,"i",14),s(12," Remove"),n()(),r(13,"div",15)(14,"span",16),d("click",function(){let e=p(c).$implicit,i=_();return u(i.updateCount(e.product.id,e.count+1))}),m(15,"i",17),n(),r(16,"span"),s(17),n(),r(18,"span",16),d("click",function(){let e=p(c).$implicit,i=_();return u(i.updateCount(e.product.id,e.count-1))}),m(19,"i",18),n()()()()}if(o&2){let c=a.$implicit;l(3),f("src",c.product.imageCover,h)("alt",c.product.title),l(4),v(c.product.title),l(2),x("Price : ",c.price,""),l(8),v(c.count)}}var Q=(()=>{let a=class a{constructor(){this._CartService=C(P),this._ToastrService=C(F),this.cartDetails={}}ngOnInit(){this._CartService.getProductsCart().subscribe({next:t=>{console.log(t.data),this.cartDetails=t.data},error:t=>{console.log(t)}})}removeItem(t){this._CartService.deleteSpecificCartItem(t).subscribe({next:e=>{console.log(e),this.cartDetails=e.data,this._CartService.cartNumber.next(e.numOfCartItems)},error:e=>{console.log(e)}})}updateCount(t,e){e>0?this._CartService.updateProductQuantity(t,e).subscribe({next:i=>{this._ToastrService.success(i.message,"FreshCartProduct"),console.log(i),this.cartDetails=i.data},error:i=>{console.log(i)}}):this.removeItem(t)}clearItems(){this._CartService.clearCart().subscribe({next:t=>{console.log(t),t.message=="success"&&(this.cartDetails={},this._CartService.cartNumber.next(0))},error:t=>{console.log(t)}})}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=g({type:a,selectors:[["app-cart"]],standalone:!0,features:[w],decls:14,vars:7,consts:[[1,"bg-main-light","shadow","p-4","my-2","rounded-4","w-75","mx-auto"],[1,"d-flex","align-items-center","justify-content-between"],[1,"text-center"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"text-main"],[1,"row","mb-1","border-bottom"],[1,"btn-main","mt-2",3,"routerLink"],["src","../../../assets/images/Pay visa.png","alt","visa-img",1,"visa-img",2,"width","100px"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","align-items-center","justify-content-between"],[1,"h5"],[1,"text-main","m-0"],[1,"text-danger","cr",3,"click"],[1,"fa-solid","fa-trash"],[1,"d-flex","align-items-center","gap-2"],[1,"text-main","cr",3,"click"],[1,"fa-solid","fa-circle-plus","fa-2xl"],[1,"fa-solid","fa-circle-minus","fa-2xl"]],template:function(e,i){e&1&&(r(0,"section",0)(1,"div",1)(2,"h2",2),s(3,"Shop Cart"),n(),r(4,"button",3),d("click",function(){return i.clearItems()}),s(5,"Clear Card"),n()(),r(6,"p",4),s(7),I(8,"currency"),n(),S(9,j,20,5,"div",5,V),r(11,"button",6),s(12," Payment Online "),m(13,"img",7),n()()),e&2&&(l(7),x("Total Cart Price :",E(8,2,i.cartDetails.totalCartPrice,"GBP"),""),l(2),b(i.cartDetails.products),l(2),f("routerLink",y(5,$,i.cartDetails._id)))},dependencies:[T,D]});let o=a;return o})();export{Q as CartComponent};
