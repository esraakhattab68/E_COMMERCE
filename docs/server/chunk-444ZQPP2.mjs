import './polyfills.server.mjs';
import{a as M}from"./chunk-FJ2IAWW2.mjs";import{a as j}from"./chunk-2BOA2XRE.mjs";import{a as N}from"./chunk-H5XM5KSQ.mjs";import{a as $,b as B}from"./chunk-NTZ363UZ.mjs";import"./chunk-GTSSCL6B.mjs";import"./chunk-WVUI6REW.mjs";import{I as R,l as V,m as I}from"./chunk-LOHHBPFK.mjs";import{Gb as D,Hb as d,Ib as m,Ma as L,Ob as E,Pb as A,Qa as s,Qb as P,Ub as T,Va as k,Wb as W,Y as _,aa as F,fb as h,hb as g,ka as p,la as u,lb as f,mb as y,nb as w,ob as b,pb as a,qb as c,rb as v,ub as C,yb as x,zb as l}from"./chunk-SFVOZAT5.mjs";import"./chunk-VVCT4QZE.mjs";var O=(e,o)=>o._id,z=e=>["/productdetails",e],U=()=>[1,2,3,4,5];function q(e,o){if(e&1){let i=C();a(0,"i",14),x("click",function(){p(i);let t=l().$implicit,r=l(2);return u(r.addFav(t.id))}),c()}}function G(e,o){if(e&1){let i=C();a(0,"i",15),x("click",function(){p(i);let t=l().$implicit,r=l(2);return u(r.removeFav(t.id))}),c()}}function H(e,o){e&1&&(a(0,"span"),v(1,"i",16),c())}function J(e,o){e&1&&v(0,"i",11)}function K(e,o){if(e&1){let i=C();a(0,"div",3)(1,"div",4),h(2,q,1,0,"i",5)(3,G,1,0),a(4,"header",6),v(5,"img",7),a(6,"h3",8),d(7),T(8,"cutText"),c(),a(9,"h4",8),d(10),c(),a(11,"div",9)(12,"span",10),d(13),T(14,"currency"),c(),a(15,"div"),w(16,H,2,0,"span",null,y),h(18,J,1,0,"i",11),a(19,"span",12),d(20),c()()()(),a(21,"footer")(22,"button",13,0),x("click",function(){let t=p(i).$implicit,r=D(23),S=l(2);return u(S.addProduct(t._id,r))}),d(24,"+AddToCart"),c()()()()}if(e&2){let i=o.$implicit,n=l(2);s(2),f(2,n.wishListData.includes(i._id)?n.wishListData.includes(i._id)?3:-1:2),s(2),g("routerLink",P(15,z,i._id)),s(),g("src",i.imageCover,L)("alt",i.title),s(2),m(W(8,9,i.title,3)),s(3),m(i.category.name),s(3),m(W(14,12,i.price,"E\xA3")),s(3),b(A(17,U).slice(0,i.ratingsAverage)),s(2),f(18,i.ratingsAverage%1!==0?18:-1),s(2),m(i.ratingsAverage)}}function Q(e,o){if(e&1&&(a(0,"section",1)(1,"h2"),d(2,"WishList Products"),c(),a(3,"div",2),w(4,K,25,18,"div",3,O),c()()),e&2){let i=l();s(4),b(i.products)}}var lt=(()=>{let o=class o{constructor(){this._CartService=_($),this._ToastrService=_(B),this._Renderer2=_(k).createRenderer(null,null),this._WishlistService=_(N),this._ProductsService=_(j),this.products=[],this.wishListData=""}addProduct(n,t){this._Renderer2.setAttribute(t,"disabled","true"),this._CartService.addProductToCart(n).subscribe({next:r=>{console.log(r),this._ToastrService.success(r.message),this._CartService.cartNumber.next(r.numOfCartItems)},error:r=>{this._Renderer2.removeAttribute(t,"disabled")}})}ngOnInit(){this._WishlistService.getWishList().subscribe({next:n=>{this.products=n.data;let t=n.data.map(r=>r._id);this.wishListData=t}})}addFav(n){this._WishlistService.addToWishList(n).subscribe({next:t=>{this._ToastrService.success(t.message),this.wishListData=t.data,this._WishlistService.wishListNumber.next(t.data.length)}})}removeFav(n){this._WishlistService.removeWishList(n).subscribe({next:t=>{this._ToastrService.success(t.message),this.wishListData=t.data,this._WishlistService.wishListNumber.next(t.data.length);let r=this.products.filter(S=>this.wishListData.includes(S._id));this.products=r}})}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=F({type:o,selectors:[["app-wishlist"]],standalone:!0,features:[E],decls:1,vars:1,consts:[["btnAdd",""],[1,"py-4"],[1,"row","g-4","justify-content-center"],[1,"col-md-2"],[1,"product","p-2"],[1,"fa-regular","fa-heart","heart","cr"],["role","button",3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"h6"],[1,"d-flex","align-items-center","justify-content-between","small"],[1,"font-sm"],[1,"fa-solid","fa-star-half-stroke","rating-color"],[1,"text-muted"],[1,"btn-main","w-100","py-2",3,"click"],[1,"fa-regular","fa-heart","heart","cr",3,"click"],[1,"fa-solid","fa-heart","heart","cr",3,"click"],[1,"fas","fa-star","rating-color"]],template:function(t,r){t&1&&h(0,Q,6,0,"section",1),t&2&&f(0,r.products.length>0?0:-1)},dependencies:[I,V,R,M]});let e=o;return e})();export{lt as WishlistComponent};
